<!--
 * @Author: shen
 * @Date: 2022-06-07 08:31:40
 * @LastEditors: shen
 * @LastEditTime: 2022-06-07 10:06:28
 * @Description:
-->

# 设计

Shene Micro 微前端架构设计是基于 Vue3、Typescript、MicroApp 的主流技术架构设计，主技术栈使用目前最火的前端框架 Vue3，但是又不限制接入其他框架开发的子应用。

## 概念

由于架构上比较复杂，涉及的内容比较多，所以咱们要约定统一一下概念称呼，否则在沟通上会存在差异。

### 1. 底座

**底座**是什么呢？**底座**就是你这个项目的基石，所有的主子应用都是基于**底座**之上的，底座包含`文档`、`脚本`、`公共组件`等，所有公用及通用的可复用的都在**底座**内。

**底座**设计的目录就是为了高复用及脚本执行，因为是微前端，所以会涉及到多个独立的项目，那么就会存在本地启动服务比较麻烦，所以一切的脚本都是在**底座**执行的，你不需要进入到每个子应用去执行脚本。

**底座** 也是你项目的主 `git` 仓库。

### 2. 基座（主应用）

**基座**是什么呢？你也可以叫它**主应用**，它是所有`子应用`的的调度中心，**基座**包含`登录`、`首页`、`布局`、`全局状态下发`、`路由跳转`等内容，同时子应用的`加载`、`卸载`都是由**基座**控制的。

**基座**是独立的项目，是需要独立打包部署的，如果修改的内容不影响子应用，那么只需要单独打包发布就可以。

**基座**也是一个单独的 git 仓库，但是它是**底座**的一个`git`子模块，所以必须先有底座才有基座。

### 3. 子应用

**子应用**就不用说了，它是业务功能的聚合，所以**子应用**的拆分上要注意，不相关的功能不要放在一个**子应用**内，**子应用**之间是无法直接通讯的，需要**基座**调度，所以通讯频繁的功能需设计在一个**子应用**内。

**子应用**也是一个单体项目，单独的 git 仓库，也是**底座**的一个`git`子模块，所以它的启动、打包都是基于**底座**的。

**子应用**本地单独启动是没有意义的，它必须由**基座**挂载后才能呈现，所以本地开发时建议启动`基座+一个子应用`即可，启动多个子应用的话，怕你电脑配置扛不住。

## Vue3 + typescript

框架内部主子应用全部使用 Vue3 + typescript 技术栈，可以外接其他子应用，外接子应用技术栈可以是 Vue3、Vue2、React 等主流框架。

## pnpm 包管理工具

使用 pnpm 管理项目，顶层依赖安装、顶层执行脚本、所有的一切你都是在根目录做，无需进入到子应用自动项目。

## shene/micro-cli 脚手架

自研脚手架工具，在开发时期，你可以方便的选择想要运行的子应用，在打包发布时，你可以通过简单的参数配置实现主子应用打包。

## git submodule 子模块

你可以使用 git 子模块的方式把主子应用拆分到不同的 git 仓库中，所有项目单独管理。
